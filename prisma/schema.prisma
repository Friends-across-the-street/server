// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator markdown {
  provider = "prisma-markdown"
  output   = "../ERD.md"
  title    = "DongA"
}

model incumbent_users {
  id    Int     @default(autoincrement()) @id
  email String  @unique
  password String
  name  String
  age Int
  gender String
  image String
  reported_num Int @default(0)
  advice_count Int @default(0)
  estimation_count Float @default(5.0)
  major String
  school String
  job_description String
  company_name String?
  company_welfare String @default("0000000000")// TODO) category가 정확하게 정해진 후, flag개수 조정
  company_location String?
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt 
  posts posts[]
  comments comments[]
  recommend_post recommend_post[]
  recommend_comment recommend_comment[]
  reported_post reported_post[]
  reported_comment reported_comment[]
}

model student_users {
  id    Int     @default(autoincrement()) @id
  email String  @unique
  password String
  name  String
  age Int
  gender String
  image String
  reported_num Int @default(0)
  total_grade Float
  advice_count Int @default(0)
  estimation_count Float @default(5.0)
  major String
  school String
  wish_job_description String
  wish_company_name String
  wish_company_welfare String
  wish_company_location String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt 
  posts posts[]
  comments comments[]
  recommend_post recommend_post[]
  recommend_comment recommend_comment[]
  reported_post reported_post[]
  reported_comment reported_comment[]
}

model posts {
  id    Int     @default(autoincrement()) @id
  title String
  content String
  view Int @default(0)
  hit Int @default(0)
  reported Int @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt 
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int?
  student_user student_users? @relation(fields: [student_user_id], references: [id])
  student_user_id Int?
  comments comments[]
  recommend_post recommend_post[]
  reported_post reported_post[]
}

model comments {
  id    Int     @default(autoincrement()) @id
  content String
  parent_comment_id Int @default(0)
  hit Int @default(0)
  reported Int @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt 
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int? 
  student_user student_users? @relation(fields: [student_user_id], references: [id])
  student_user_id Int? 
  post posts @relation(fields: [post_id], references: [id])
  post_id Int
  recommend_comment recommend_comment[]
  reported_comment reported_comment[]
}

model recommend_post {
  id    Int     @default(autoincrement()) @id
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int 
  student_user student_users @relation(fields: [student_user_id], references: [id])
  student_user_id Int 
  post posts @relation(fields: [post_id], references: [id])
  post_id Int
  createdAt DateTime @default(now())
}

model reported_post {
  id    Int     @default(autoincrement()) @id
  reason String
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int? 
  student_user student_users? @relation(fields: [student_user_id], references: [id])
  student_user_id Int? 
  post posts @relation(fields: [post_id], references: [id])
  post_id Int
  createdAt DateTime @default(now())
}


model recommend_comment {
  id    Int     @default(autoincrement()) @id
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int? 
  student_user student_users? @relation(fields: [student_user_id], references: [id])
  student_user_id Int? 
  comment comments @relation(fields: [comment_id], references: [id])
  comment_id Int
  createdAt DateTime @default(now())
}

model reported_comment {
  id    Int     @default(autoincrement()) @id
  reason String
  incumbent_user incumbent_users? @relation(fields: [incumbent_user_id], references: [id])
  incumbent_user_id Int? 
  student_user student_users? @relation(fields: [student_user_id], references: [id])
  student_user_id Int? 
  comment comments @relation(fields: [comment_id], references: [id])
  comment_id Int
  createdAt DateTime @default(now())
}